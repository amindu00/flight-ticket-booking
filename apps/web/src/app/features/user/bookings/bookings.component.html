<div class="bookings-container">
  <h1>My Bookings</h1>
  <div class="bookings-list">
    @for (booking of bookings(); track booking.id) {
      <mat-card class="booking-card">
        <mat-card-header>
          <mat-card-title>
            {{ booking.flight.departureAirport.name }} to {{ booking.flight.arrivalAirport.name }}
          </mat-card-title>
          <mat-card-subtitle>
            Booked on {{ booking.bookingDate | date: 'mediumDate' }}
          </mat-card-subtitle>
          <div class="status-chip">
            @if (booking.status === BookingStatus.PENDING) {
              <mat-chip class="pending">pending</mat-chip>
            } @else if (booking.status === BookingStatus.CANCELLED) {
              <mat-chip class="cancelled">cancelled</mat-chip>
            } @else {
              <mat-chip class="confirmed">confirmed</mat-chip>
            }
          </div>
        </mat-card-header>

        <mat-card-content>
          <div class="flight-details">
            <div class="info-row">
              <span class="label">Airline:</span>
              <span class="value">
                {{ booking.flight.plane.name }} ({{ booking.flight.code }})
              </span>
            </div>
            <div class="info-row">
              <span class="label">Departure:</span>
              <span class="value">{{ booking.flight.departureTime | date: 'short' }}</span>
            </div>
            <div class="info-row">
              <span class="label">Arrival:</span>
              <span class="value">{{ booking.flight.arrivalTime | date: 'short' }}</span>
            </div>
            <div class="info-row">
              <span class="label">Price:</span>
              <span class="value">{{ booking.pricePaid | currency }}</span>
            </div>
          </div>
        </mat-card-content>
        @if (booking.status === BookingStatus.CONFIRMED) {
          <mat-card-actions align="end">
            <button mat-button color="warn" (click)="cancelBooking(booking.id)">
              Cancel Booking
            </button>
          </mat-card-actions>
        }
      </mat-card>
    } @empty {
      <div class="no-bookings">
        <mat-icon>airplane_ticket</mat-icon>
        <h3>No bookings found</h3>
        <p>You haven't booked any flights yet.</p>
        <button mat-flat-button color="primary" routerLink="/flight-search">Search Flights</button>
      </div>
    }
  </div>
</div>
